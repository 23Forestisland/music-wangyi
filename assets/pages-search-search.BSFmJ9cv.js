import{o as a,c as e,w as t,e as l,Y as s,_ as n,Z as i,k as o,t as c,f as u,i as d,p as r,d as f,r as _,a4 as p,a as m,b as g,a0 as v,a1 as h,h as y,j as k,F as b,ae as C,u as S,m as x,S as w,a6 as V,n as j,af as I}from"./index-DlNOth4X.js";import{_ as T}from"./uni-load-more.D6YIxeMy.js";import{_ as L}from"./index.vuevuetypestyleindex0scopedf2ce084clang.DWELfWSU.js";import{_ as $}from"./plugin-vueexport-helper.BCo6x5W8.js";import{u as z,h as F,d as M,g as B,s as O,a as J}from"./index.upOGJcHL.js";/* empty css                                                           *//* empty css                                                          */import"./uni-icons.BZs3NV_7.js";const N=$({name:"UniSection",emits:["click"],props:{type:{type:String,default:""},title:{type:String,required:!0,default:""},titleFontSize:{type:String,default:"14px"},titleColor:{type:String,default:"#333"},subTitle:{type:String,default:""},subTitleFontSize:{type:String,default:"12px"},subTitleColor:{type:String,default:"#999"},padding:{type:[Boolean,String],default:!1}},computed:{_padding(){return"string"==typeof this.padding?this.padding:this.padding?"10px":""}},watch:{title(a){uni.report&&""!==a&&uni.report("title",a)}},methods:{onClick(){this.$emit("click")}}},[["render",function(f,_,p,m,g,v){const h=d,y=r;return a(),e(h,{class:"uni-section"},{default:t((()=>[l(h,{class:"uni-section-header",onClick:v.onClick},{default:t((()=>[p.type?(a(),e(h,{key:0,class:s(["uni-section-header__decoration",p.type])},null,8,["class"])):n(f.$slots,"decoration",{key:1},void 0,!0),l(h,{class:"uni-section-header__content"},{default:t((()=>[l(y,{style:i({"font-size":p.titleFontSize,color:p.titleColor}),class:s(["uni-section__content-title",{distraction:!p.subTitle}])},{default:t((()=>[o(c(p.title),1)])),_:1},8,["style","class"]),p.subTitle?(a(),e(y,{key:0,style:i({"font-size":p.subTitleFontSize,color:p.subTitleColor}),class:"uni-section-header__content-sub"},{default:t((()=>[o(c(p.subTitle),1)])),_:1},8,["style"])):u("",!0)])),_:1}),l(h,{class:"uni-section-header__slot-right"},{default:t((()=>[n(f.$slots,"right",{},void 0,!0)])),_:3})])),_:3},8,["onClick"]),l(h,{class:"uni-section-content",style:i({padding:v._padding})},{default:t((()=>[n(f.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3})}],["__scopeId","data-v-b442413a"]]),R=$(f({__name:"historical",emits:["changeVal"],setup(s,{emit:n}){const i=_(!1),u=z(),r=_([]),f=()=>{localStorage.removeItem("historical"),u.historical=[]};return p((()=>u.historical.length),(()=>{r.value=u.historical,r.value=r.value.reverse(),console.log(r.value)}),{immediate:!0}),(s,n)=>{const u=m(g("uni-section"),N),_=d;return a(),e(_,{class:"historical"},{default:t((()=>[l(_,{class:"tit"},{default:t((()=>[l(u,{title:"搜索历史",type:"line"}),l(_,{class:"iconfont icon-shanchu1",onClick:f})])),_:1}),v(l(_,null,{default:t((()=>[v(l(_,{class:"content1"},{default:t((()=>[(a(!0),y(b,null,k(r.value.slice(0,2),(l=>(a(),e(_,{class:"item-con"},{default:t((()=>[o(c(l),1)])),_:2},1024)))),256)),l(_,{class:"open iconfont icon-xiajiantou",onClick:n[0]||(n[0]=a=>i.value=!i.value)})])),_:1},512),[[h,!i.value]]),v(l(_,{class:"content2"},{default:t((()=>[(a(!0),y(b,null,k(r.value,(l=>(a(),e(_,{class:"item-con"},{default:t((()=>[o(c(l),1)])),_:2},1024)))),256)),l(_,{class:"open iconfont icon-xiangshangjiantou1",onClick:n[1]||(n[1]=a=>i.value=!i.value)})])),_:1},512),[[h,i.value]])])),_:1},512),[[h,r.value.length>0]])])),_:1})}}}),[["__scopeId","data-v-aa4e6992"]]),U=$(f({__name:"hotList",emits:["changeVal"],setup(s,{emit:n}){const i=_([]);let u=_("60px"),f=_("0"),p=_([]),m=[];const g=n,v=async a=>{try{const e=await M(a);m.push(e.playlist.tracks.slice(0,20))}catch(e){console.log(e)}},h=async()=>{for(const a of i.value)await v(a.id);p.value=m,console.log(p.value)};C((()=>{(async()=>{try{const a=await F(),e=Math.floor(Math.random()*(a.list.length-5));i.value=a.list.slice(e,e+6),h()}catch(a){console.log(a)}})()}));const V=a=>{a.detail.current<i.value.length-1?(u.value="60px",f.value="0"):(u.value="0",f.value="60px")};return(s,n)=>{const _=r,m=d,v=w,h=x;return a(),e(m,{class:"hotList"},{default:t((()=>[l(h,{class:"swiper","next-margin":S(u),"previous-margin":S(f),onChange:V},{default:t((()=>[(a(!0),y(b,null,k(i.value,((s,n)=>(a(),e(v,{key:s.id,class:"swp"},{default:t((()=>[l(m,{class:"swiper-item"},{default:t((()=>[l(m,{class:"tit"},{default:t((()=>[l(_,{class:"tit-name"},{default:t((()=>[o(c(s.name),1)])),_:2},1024),l(_,{class:"iconfont icon-bofang"},{default:t((()=>[o("播放")])),_:1})])),_:2},1024),l(m,{class:"dtlList"},{default:t((()=>[(a(!0),y(b,null,k(S(p)[n],((s,n)=>(a(),e(m,{class:"ls-item",key:s.name,onClick:a=>g("changeVal",s.name)},{default:t((()=>[l(m,{class:"numb"},{default:t((()=>[o(c(n+1+"."),1)])),_:2},1024),o(c(s.name),1)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["next-margin","previous-margin"])])),_:1})}}}),[["__scopeId","data-v-fb5d36d5"]]),q=$(f({__name:"guessLike",emits:["changeVal"],setup(s,{emit:n}){const i=n,u=_(),r=async()=>{try{const a=await B(),e=Math.floor(Math.random()*a.data.dailySongs.length);u.value=a.data.dailySongs.slice(e)}catch(a){console.log(a)}};return V((()=>{r()})),(s,n)=>{const f=m(g("uni-section"),N),_=d;return a(),e(_,{class:"guessLike"},{default:t((()=>[l(_,{class:"tit"},{default:t((()=>[l(f,{title:"猜你喜欢",type:"line"}),l(_,{class:"iconfont icon-shuaxin",onClick:r})])),_:1}),l(_,{class:"content"},{default:t((()=>[l(_,{class:"dateList"},{default:t((()=>[(a(!0),y(b,null,k(u.value,(l=>(a(),e(_,{class:"List-it",key:l.id,onClick:a=>i("changeVal",l.name)},{default:t((()=>[o(c(l.name),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-b57e82e8"]]),G=$(f({__name:"suggest",props:{list:{}},emits:["changeVal"],setup(s,{emit:n}){const i=s,r=n;return(s,n)=>{const f=d;return i.list?(a(),e(f,{key:0,class:"suggestList"},{default:t((()=>[(a(!0),y(b,null,k(i.list,(s=>(a(),e(f,{key:s.keyword,class:"lSitem",onClick:a=>r("changeVal",s.keyword)},{default:t((()=>[l(f,{class:"iconfont icon-sousuo"}),l(f,null,{default:t((()=>[o(c(s.keyword),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):u("",!0)}}}),[["__scopeId","data-v-b5ea50ed"]]),Y=$(f({__name:"srhRes",props:{list:{}},setup(s){const n=s;return(s,i)=>{const u=d;return a(),e(u,{class:"srhRestList"},{default:t((()=>[(a(!0),y(b,null,k(n.list,((s,n)=>(a(),e(u,{key:s.id,class:"item",onClick:a=>{return e=s.id,t=s.album.id,l=s.name,n=s.artists.map((a=>a.name)).join("/"),void j({url:`/pages/player/player?id=${e}&albumId=${t}&name=${l}&art=${n}`});var e,t,l,n}},{default:t((()=>[l(u,{class:"left"},{default:t((()=>[l(u,{class:"name"},{default:t((()=>[o(c(s.name),1)])),_:2},1024),l(u,{class:"art"},{default:t((()=>[o(c(s.artists.map((a=>a.name)).join("/"))+" - "+c(s.album.name),1)])),_:2},1024)])),_:2},1024),l(u,{class:"right"},{default:t((()=>[l(u,{class:"play iconfont icon-bofang"}),l(u,{class:"menu iconfont icon-gengduo"})])),_:1})])),_:2},1032,["onClick"])))),128))])),_:1})}}}),[["__scopeId","data-v-a278c784"]]),Z=$(f({__name:"search",setup(s){const n=_(),i=_(0),c=_(!1),f=_(),k=_([]),C=_([]),S=z();let x;const w=_(!1),V=a=>{""===a||f.value||(console.log("input 事件"),x&&clearTimeout(x),x=setTimeout((()=>{(async a=>{try{w.value=!0;const e=await J(a);console.log(e),C.value=e.result.allMatch}catch(e){console.log(e)}})(a)}),500))},j=async()=>{c.value=!0,f.value=!0,console.log("search 事件",n.value);const a=await O(n.value);k.value=a.result.songs,f.value=!1,(JSON.parse(localStorage.getItem("historical"))||[]).indexOf(n.value)<0&&(S.historical.push(n.value),localStorage.setItem("historical",JSON.stringify(S.historical)))},$=()=>{j()},F=a=>{n.value=a,j()},M=()=>{I({delta:1})};return p([n,c],(()=>{n.value?(i.value=1,V(n.value),c.value&&(i.value=2)):(i.value=0,c.value=!1,k.value=[],C.value=[])})),(s,c)=>{const f=m(g("uni-load-more"),T),_=d,p=m(g("uni-search-bar"),L),S=r;return a(),y(b,null,[w.value?(a(),e(_,{key:0,class:"loading"},{default:t((()=>[l(f,{status:"loading",iconType:"circle",color:"#fff"})])),_:1})):u("",!0),l(_,{class:"head"},{default:t((()=>[l(_,{class:"iconfont icon-houtui",onClick:M}),l(_,{class:"search"},{default:t((()=>[l(p,{class:"uni-mt-10",radius:"5",placeholder:"请输入搜索内容",clearButton:"auto",cancelButton:"none",modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=a=>n.value=a),onConfirm:j},null,8,["modelValue"])])),_:1}),l(_,{onClick:$},{default:t((()=>[o("搜索")])),_:1})])),_:1}),v(l(_,{class:"initial"},{default:t((()=>[l(_,{class:"tabs"},{default:t((()=>[l(_,{class:"tab-item"},{default:t((()=>[l(S,{class:"iconfont icon-geshou"}),l(S,null,{default:t((()=>[o("歌手")])),_:1})])),_:1}),o(" | "),l(_,{class:"tab-item"},{default:t((()=>[l(S,{class:"iconfont icon-benshu"}),l(S,null,{default:t((()=>[o("曲风")])),_:1})])),_:1}),o(" | "),l(_,{class:"tab-item"},{default:t((()=>[l(S,{class:"iconfont icon-yinfuSVG-"}),l(S,null,{default:t((()=>[o("专区")])),_:1})])),_:1}),o(" | "),l(_,{class:"tab-item"},{default:t((()=>[l(S,{class:"iconfont icon-maikefeng"}),l(S,null,{default:t((()=>[o("识曲")])),_:1})])),_:1})])),_:1}),l(R,{onChangeVal:F}),l(q,{onChangeVal:F}),l(U,{onChangeVal:F})])),_:1},512),[[h,0===i.value]]),v(l(_,{class:"rel"},{default:t((()=>[l(G,{list:C.value,onChangeVal:F},null,8,["list"])])),_:1},512),[[h,1===i.value]]),v(l(_,{class:"rel"},{default:t((()=>[l(Y,{list:k.value},null,8,["list"])])),_:1},512),[[h,2===i.value]])],64)}}}),[["__scopeId","data-v-94f318ba"]]);export{Z as default};
